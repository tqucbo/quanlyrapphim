@model QuanLyRapPhim.Models.FilmModel

@{
    ViewData["Title"] = "Thêm phim mới";
}

<h1>@ViewData["Title"]</h1>
<hr>

<form method="post" asp-action="AddNewFilm">
    <div class="form-group row no-gutters">
        <label asp-for="@Model.filmName" class="col-3 col-form-label"></label>
        <div class="col-sm-6">
            <input asp-for="@Model.filmName" type="text" class="form-control">
            <span asp-validation-for="@Model.filmName" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row no-gutters">
        <label asp-for="@Model.filmLength" class="col-3 col-form-label"></label>
        <div class="col-sm-6">
            <input asp-for="@Model.filmLength" type="number" class="form-control">
            <span asp-validation-for="@Model.filmLength" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row no-gutters">
        <label asp-for="@Model.filmGenre.filmGenreName" class="col-3 col-form-label"></label>
        <select name="filmGenre" id="filmGenre" class="col-sm-6">
        </select>
    </div>
    <div class="form-group row no-gutters">
        <label asp-for="@Model.filmMainCategory.filmMainCategoryName" class="col-3 col-form-label"></label>
        <select name="filmMainCategory" id="filmMainCategory" class="col-sm-6">
        </select>
    </div>
    <div class="form-group row no-gutters">
        <label asp-for="@Model.filmDirector" class="col-3 col-form-label"></label>
        <div class="col-sm-6">
            <input asp-for="@Model.filmDirector" type="number" class="form-control">
            <span asp-validation-for="@Model.filmDirector" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row no-gutters">
        <button class="btn btn-primary">Gửi thông tin</button>
    </div>

</form>

@section Scripts {
    <script>
        $(document).ready(function (event) {
            $.ajax({
                type: "GET",
                url: "@Url.RouteUrl("AddNewFilmAutoLoad")",
                success: function (response) {

                    var filmGenres = response.filmGenres;
                    var filmMainCategories = response.filmMainCategories;

                    for (i in filmGenres) {
                        $("#filmGenre").append(
                            "<option value=\"" + filmGenres[i].filmGenreId + "\">" + filmGenres[i].filmGenreName + " - " + filmGenres[i].filmGenreDescription + "</option>");
                    }
                    for (i in filmMainCategories) {
                        $("#filmMainCategory").append(
                            "<option value=\"" + filmMainCategories[i].filmMainCategoryId + "\">" + filmMainCategories[i].filmMainCategoryName + "</option>"
                        );
                    }
                }
            });
        });
    </script>
}